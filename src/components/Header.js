import React, { Fragment, useState, useEffect, useRef } from "react";
import { Link } from "react-router-dom";
import styled from "styled-components";

import "./styles/Header.css";

const Header = () => {
	const hamburgerIconRight = useRef(null);
	const hamburgerIconLeft = useRef(null);
	const hamburgerIcon = useRef(null);
	const asideRight = useRef(null);
	const asideLeft = useRef(null);
	const [bool, setBool] = useState(true);
	const [branch, setBranch] = useState("intro");
	const [main, setMain] = useState(null);
	const [mobile, setMobile] = useState(window.innerWidth < 768);
	const keys = { escape: "Escape", retroceso: "Backspace" };

	const toggleRight = () => {
		hamburgerIconRight.current.classList.toggle("active");
		asideRight.current.classList.toggle("aside_right_active");
	};

	const toggleLeft = () => {
		hamburgerIconLeft.current.classList.toggle("active");
		asideLeft.current.classList.toggle("aside_left_active");
	};

	const removeBoth = () => {
		hamburgerIconRight.current.classList.remove("active");
		asideRight.current.classList.remove("aside_right_active");
		hamburgerIconLeft.current.classList.remove("active");
		asideLeft.current.classList.remove("aside_left_active");
	};

	const toggle = () => {
		const mainRef = document.getElementById("main");
		setMain(mainRef);

		hamburgerIcon.current.classList.toggle("active");
		asideRight.current.classList.toggle("aside_right_active");
		asideLeft.current.classList.toggle("aside_left_active");

		if (bool) {
			mainRef.addEventListener("click", removeToggle);
			setBool(false);
		} else {
			mainRef.removeEventListener("click", removeToggle);
			setBool(true);
		}
	};

	const removeToggle = () => {
		hamburgerIcon.current.classList.remove("active");
		asideRight.current.classList.remove("aside_right_active");
		asideLeft.current.classList.remove("aside_left_active");
	};

	const changeBranch = (newBranch) => {
		setBranch(newBranch);

		// Comprobar el tamaño de la pantalla que sea mayor a 768px
		if (window.innerWidth >= 768) {
			main.removeEventListener("click", removeToggle);

			// Call the web API of setTimeout and then enter in the task queue to update the current main component
			setTimeout(() => {
				const mainRef = document.getElementById("main");
				setMain(mainRef);
				mainRef.addEventListener("click", removeToggle);
			}, 0);
		} else {
			removeBoth();
		}
	};

	// Actualizamos el tamaño de la pantalla cuando cambie
	window.addEventListener("resize", () => {
		setMobile(window.innerWidth < 768);
	});

	useEffect(() => {
		if (!mobile) {
			if (
				asideRight.current.classList.contains("aside_right_active") ||
				asideLeft.current.classList.contains("aside_left_active") ||
				hamburgerIconRight.current.classList.contains("active") ||
				hamburgerIconLeft.current.classList.contains("active")
			) {
				removeBoth();
				toggle();
			}
		} else if (mobile) {
			if (
				asideRight.current.classList.contains("aside_right_active") ||
				asideLeft.current.classList.contains("aside_left_active") ||
				hamburgerIcon.current.classList.contains("active")
			) {
				removeToggle();
				toggleRight();
			}
		}
		// eslint-disable-next-line react-hooks/exhaustive-deps
	}, [mobile]);

	useEffect(() => {
		window.addEventListener("keydown", (e) => {
			if (e.key === keys.escape || e.key === keys.retroceso) {
				if (
					asideRight.current.classList.contains("aside_right_active") &&
					asideLeft.current.classList.contains("aside_left_active")
				) {
					removeToggle();
				} else if (
					asideRight.current.classList.contains("aside_right_active") &&
					!asideLeft.current.classList.contains("aside_left_active")
				) {
					toggleRight();
				} else if (
					!asideRight.current.classList.contains("aside_right_active") &&
					asideLeft.current.classList.contains("aside_left_active")
				) {
					toggleLeft();
				}
			}
		});
		// eslint-disable-next-line react-hooks/exhaustive-deps
	}, []);

	return (
		<HeaderContainer>
			<Button className="icon-mobile" onClick={toggleLeft}>
				<IconRight width="32" height="32" ref={hamburgerIconLeft}>
					<line id="top" x1="10%" y1="20%" x2="50%" y2="20%" />
					<line id="middle" x1="10%" y1="50%" x2="90%" y2="50%" />
					<line id="bottom" x1="50%" y1="80%" x2="90%" y2="80%" />
				</IconRight>
			</Button>
			<Logo as={Link} to="/">
				<svg id="logo" width="100%" height="100%" viewBox="0 0 224 59" fill="none">
					<path
						id="m"
						d="M29.3213 35.1846L28.1738 46H0.585938V45.1455L14.5264 29.6182L0.976562 12.2109V11.3564H27.0996V20.5605H25.3662C25.0081 18.9329 24.3164 17.403 23.291 15.9707C22.2819 14.5221 21.2321 13.7083 20.1416 13.5293C19.6533 13.4479 18.9535 13.391 18.042 13.3584C17.1468 13.3096 16.4144 13.2852 15.8447 13.2852H8.30078L19.165 27.25V27.6406L6.46973 41.7031H22.4121C23.1445 41.7031 23.7956 41.4834 24.3652 41.0439C24.9349 40.6045 25.4232 40.043 25.8301 39.3594C26.2044 38.7409 26.5381 38.0573 26.8311 37.3086C27.124 36.5436 27.3844 35.8356 27.6123 35.1846H29.3213Z"
						fill="#16FFE2"
					/>
					<path
						id="atematicas"
						d="M30.5859 46C30.8464 45.4141 31.1263 44.7435 31.4258 43.9883C31.7383 43.2331 32.1419 42.1719 32.6367 40.8047L38.4961 24.6133H41.6406L47.5 40.8047C47.9948 42.1719 48.3984 43.2331 48.7109 43.9883C49.0234 44.7435 49.3034 45.4141 49.5508 46H46.543L44.5508 40.375H35.5469L33.5742 46H30.5859ZM36.3281 38.0898H43.7695L40.0195 27.4844L36.3281 38.0898ZM57.8125 46C57.9427 45.4141 58.0208 44.5677 58.0469 43.4609C58.0859 42.3542 58.1055 41.0781 58.1055 39.6328V27.0352H54.668C54.0169 27.0352 53.3984 27.0547 52.8125 27.0938C52.2396 27.1198 51.6602 27.1979 51.0742 27.3281V24.6133H68.0078V27.3281C67.4219 27.1979 66.8359 27.1198 66.25 27.0938C65.6771 27.0547 65.0651 27.0352 64.4141 27.0352H60.8984V39.6328C60.8984 41.0781 60.9115 42.3542 60.9375 43.4609C60.9766 44.5677 61.0612 45.4141 61.1914 46H57.8125ZM71.2891 46C71.3932 45.4141 71.4518 44.5677 71.4648 43.4609C71.4909 42.3542 71.5039 41.0781 71.5039 39.6328V31C71.5039 29.5547 71.4909 28.2786 71.4648 27.1719C71.4518 26.0521 71.3932 25.1992 71.2891 24.6133H83.7305V27.0352H74.2773V33.6367H82.6367V35.9805H74.2773V43.5977H78.1445C79.5898 43.5977 80.8073 43.5846 81.7969 43.5586C82.7995 43.5326 83.5938 43.4674 84.1797 43.3633V46H71.2891ZM97.5 46L90.0977 24.6133H92.5977L98.8867 43.0117L105.273 24.6133H107.715L100.352 46H97.5ZM88.2812 46C88.3333 45.5833 88.3919 44.8932 88.457 43.9297C88.5221 42.9531 88.5872 41.8138 88.6523 40.5117C88.7174 39.1966 88.776 37.8164 88.8281 36.3711C88.8932 34.9258 88.9518 33.5065 89.0039 32.1133C89.069 30.7201 89.1211 29.4635 89.1602 28.3438C89.1992 27.2109 89.2318 26.306 89.2578 25.6289C89.2839 24.9518 89.2969 24.6133 89.2969 24.6133H91.8555L91.4453 28.3633L90.9766 46H88.2812ZM106.797 46L106.387 28.3633L105.918 24.6133H108.496C108.496 24.6133 108.503 24.9518 108.516 25.6289C108.542 26.306 108.574 27.2109 108.613 28.3438C108.652 29.4635 108.698 30.7201 108.75 32.1133C108.815 33.5065 108.874 34.9258 108.926 36.3711C108.991 37.8164 109.056 39.1966 109.121 40.5117C109.186 41.8138 109.251 42.9531 109.316 43.9297C109.382 44.8932 109.447 45.5833 109.512 46H106.797ZM112.812 46C113.073 45.4141 113.353 44.7435 113.652 43.9883C113.965 43.2331 114.368 42.1719 114.863 40.8047L120.723 24.6133H123.867L129.727 40.8047C130.221 42.1719 130.625 43.2331 130.938 43.9883C131.25 44.7435 131.53 45.4141 131.777 46H128.77L126.777 40.375H117.773L115.801 46H112.812ZM118.555 38.0898H125.996L122.246 27.4844L118.555 38.0898ZM119.648 22.582L124.766 16.2734H128.145L121.992 22.582H119.648ZM140.039 46C140.169 45.4141 140.247 44.5677 140.273 43.4609C140.312 42.3542 140.332 41.0781 140.332 39.6328V27.0352H136.895C136.243 27.0352 135.625 27.0547 135.039 27.0938C134.466 27.1198 133.887 27.1979 133.301 27.3281V24.6133H150.234V27.3281C149.648 27.1979 149.062 27.1198 148.477 27.0938C147.904 27.0547 147.292 27.0352 146.641 27.0352H143.125V39.6328C143.125 41.0781 143.138 42.3542 143.164 43.4609C143.203 44.5677 143.288 45.4141 143.418 46H140.039ZM153.223 46V43.8906H156.738V26.7422H153.223V24.6133H163.105V26.7422H159.512V43.8906H163.105V46H153.223ZM176.445 46.3516C174.479 46.3516 172.773 45.9154 171.328 45.043C169.896 44.1576 168.789 42.9141 168.008 41.3125C167.24 39.6979 166.855 37.7969 166.855 35.6094C166.855 33.0964 167.318 31 168.242 29.3203C169.18 27.6406 170.397 26.3776 171.895 25.5312C173.405 24.6849 175.02 24.2617 176.738 24.2617C177.78 24.2617 178.867 24.4049 180 24.6914C181.133 24.9779 182.22 25.5182 183.262 26.3125L182.383 28.9492C181.471 28.1159 180.521 27.543 179.531 27.2305C178.555 26.9049 177.624 26.7422 176.738 26.7422C174.694 26.7422 173.008 27.4583 171.68 28.8906C170.365 30.3099 169.707 32.4258 169.707 35.2383C169.707 36.9831 170 38.5 170.586 39.7891C171.185 41.0781 172.005 42.0742 173.047 42.7773C174.089 43.4674 175.273 43.8125 176.602 43.8125C177.721 43.8125 178.841 43.5651 179.961 43.0703C181.094 42.5755 182.07 41.918 182.891 41.0977L183.477 43.9492C182.917 44.4701 182.227 44.9128 181.406 45.2773C180.586 45.6289 179.74 45.8958 178.867 46.0781C177.995 46.2604 177.188 46.3516 176.445 46.3516ZM185.898 46C186.159 45.4141 186.439 44.7435 186.738 43.9883C187.051 43.2331 187.454 42.1719 187.949 40.8047L193.809 24.6133H196.953L202.812 40.8047C203.307 42.1719 203.711 43.2331 204.023 43.9883C204.336 44.7435 204.616 45.4141 204.863 46H201.855L199.863 40.375H190.859L188.887 46H185.898ZM191.641 38.0898H199.082L195.332 27.4844L191.641 38.0898ZM214.004 46.3516C212.598 46.3516 211.283 46.1693 210.059 45.8047C208.848 45.4401 207.871 44.9714 207.129 44.3984L207.793 41.3906C208.757 42.224 209.759 42.8359 210.801 43.2266C211.855 43.6172 212.923 43.8125 214.004 43.8125C215.189 43.8125 216.243 43.487 217.168 42.8359C218.092 42.1849 218.555 41.2669 218.555 40.082C218.555 39.5612 218.431 39.0794 218.184 38.6367C217.949 38.181 217.454 37.7383 216.699 37.3086C215.944 36.8789 214.805 36.4362 213.281 35.9805C211.758 35.5247 210.592 35.0104 209.785 34.4375C208.991 33.8516 208.444 33.207 208.145 32.5039C207.858 31.7878 207.715 31.013 207.715 30.1797C207.715 29.3464 207.949 28.474 208.418 27.5625C208.887 26.651 209.629 25.8763 210.645 25.2383C211.66 24.5872 212.975 24.2617 214.59 24.2617C215.723 24.2617 216.732 24.3659 217.617 24.5742C218.516 24.7826 219.44 25.1146 220.391 25.5703L219.805 28.4219C218.75 27.849 217.826 27.4388 217.031 27.1914C216.25 26.944 215.391 26.8203 214.453 26.8203C213.281 26.8203 212.324 27.1458 211.582 27.7969C210.853 28.4349 210.488 29.1576 210.488 29.9648C210.488 30.4987 210.599 30.974 210.82 31.3906C211.055 31.7943 211.517 32.1784 212.207 32.543C212.897 32.9076 213.939 33.2917 215.332 33.6953C217.272 34.2682 218.757 35.0299 219.785 35.9805C220.814 36.931 221.328 38.2005 221.328 39.7891C221.328 41.0911 220.996 42.237 220.332 43.2266C219.668 44.2161 218.783 44.9844 217.676 45.5312C216.569 46.0781 215.345 46.3516 214.004 46.3516Z"
						fill="#16FFE2"
					/>
					<g>
						<path
							id="one"
							style={{ "--order": "1" }}
							d="M77.8789 15C77.918 14.7803 77.9399 14.4629 77.9448 14.0479C77.9546 13.6328 77.9595 13.1543 77.9595 12.6123V9.375C77.9595 8.83301 77.9546 8.35449 77.9448 7.93945C77.9399 7.51953 77.918 7.19971 77.8789 6.97998H82.5444V7.88818H78.9995V10.3638H82.1343V11.2427H78.9995V14.0991H80.4497C80.9917 14.0991 81.4482 14.0942 81.8193 14.0845C82.1953 14.0747 82.4932 14.0503 82.7129 14.0112V15H77.8789ZM84.0312 10.4443V9.6167H89.3047V10.4443H84.0312ZM84.0312 12.3633V11.543H89.3047V12.3633H84.0312ZM90.9233 15V11.6235C90.9233 11.0864 90.8916 10.6299 90.8281 10.2539C90.7646 9.87305 90.7036 9.5874 90.645 9.39697H91.6338C91.6777 9.51416 91.7119 9.65332 91.7363 9.81445C91.7656 9.97559 91.79 10.1221 91.8096 10.2539C92.1465 9.86328 92.4614 9.60449 92.7544 9.47754C93.0522 9.35059 93.3574 9.28711 93.6699 9.28711C94.0312 9.28711 94.3242 9.37988 94.5488 9.56543C94.7734 9.75098 94.9297 9.96582 95.0176 10.21C95.3643 9.83887 95.689 9.59229 95.9917 9.47021C96.2993 9.34814 96.5972 9.28711 96.8853 9.28711C97.4419 9.28711 97.8276 9.46533 98.0425 9.82178C98.2573 10.1782 98.3647 10.6958 98.3647 11.3745V15H97.3467V11.9824C97.3467 11.5088 97.3223 11.1475 97.2734 10.8984C97.2295 10.6494 97.1489 10.481 97.0317 10.3931C96.9194 10.3003 96.7607 10.2539 96.5557 10.2539C96.2871 10.2539 96.0259 10.3564 95.772 10.5615C95.5181 10.7617 95.3105 11.0327 95.1494 11.3745V15H94.1387V11.8726C94.1387 11.4185 94.1143 11.0767 94.0654 10.8472C94.0215 10.6128 93.9409 10.4565 93.8237 10.3784C93.7065 10.2954 93.5454 10.2539 93.3403 10.2539C93.0718 10.2539 92.8057 10.3589 92.542 10.5688C92.2832 10.7739 92.083 11.0425 91.9414 11.3745V15H90.9233ZM102.408 15.1318C101.919 15.1318 101.473 15.0195 101.067 14.7949C100.662 14.5654 100.34 14.2407 100.101 13.8208C99.8613 13.4009 99.7417 12.8979 99.7417 12.312C99.7417 11.7554 99.8564 11.25 100.086 10.7959C100.32 10.3369 100.652 9.9707 101.082 9.69727C101.512 9.42383 102.017 9.28711 102.598 9.28711C102.964 9.28711 103.279 9.33105 103.543 9.41895C103.812 9.50684 104.046 9.61914 104.246 9.75586L104.056 10.7446C103.807 10.564 103.558 10.4272 103.309 10.3345C103.064 10.2417 102.801 10.1953 102.518 10.1953C102.029 10.1953 101.617 10.376 101.28 10.7373C100.948 11.0986 100.782 11.604 100.782 12.2534C100.782 12.8442 100.938 13.3228 101.25 13.689C101.563 14.0503 101.985 14.231 102.518 14.231C102.85 14.231 103.15 14.1748 103.418 14.0625C103.692 13.9453 103.948 13.7817 104.188 13.5718L104.297 14.5386C104.024 14.7485 103.743 14.8999 103.455 14.9927C103.167 15.0854 102.818 15.1318 102.408 15.1318ZM105.315 11.2646V10.6567C105.574 10.4858 105.857 10.2808 106.165 10.0415C106.473 9.80225 106.763 9.5459 107.037 9.27246C107.31 8.99902 107.532 8.72803 107.703 8.45947C107.879 8.18604 107.967 7.92969 107.967 7.69043C107.967 7.3584 107.852 7.12158 107.623 6.97998C107.398 6.83838 107.146 6.76758 106.868 6.76758C106.634 6.76758 106.39 6.82861 106.136 6.95068C105.887 7.07275 105.677 7.229 105.506 7.41943L105.33 6.81885C105.486 6.61865 105.723 6.45264 106.041 6.3208C106.363 6.18896 106.685 6.12305 107.007 6.12305C107.315 6.12305 107.601 6.18408 107.864 6.30615C108.128 6.42822 108.338 6.60156 108.494 6.82617C108.655 7.05078 108.736 7.31689 108.736 7.62451C108.736 7.9126 108.653 8.20312 108.487 8.49609C108.321 8.78418 108.111 9.06494 107.857 9.33838C107.603 9.60693 107.342 9.85596 107.073 10.0854C106.805 10.3149 106.563 10.5127 106.348 10.6787H107.33C107.71 10.6787 108.047 10.6763 108.34 10.6714C108.633 10.6616 108.855 10.6445 109.007 10.6201V11.2646H105.315Z"
							fill="#FD00FD"
						/>
						<path
							id="two"
							style={{ "--order": "2" }}
							d="M201.04 12C201.04 12 201.04 11.9023 201.04 11.707C201.04 11.5068 201.04 11.2529 201.04 10.9453C201.04 10.6377 201.04 10.3179 201.04 9.98584C201.04 9.65381 201.04 9.35596 201.04 9.09229C201.04 8.55518 201.035 8.04492 201.025 7.56152C201.021 7.07324 200.999 6.68506 200.959 6.39697H202.058V9.39258C202.058 9.62695 202.061 9.9126 202.065 10.2495C202.075 10.5815 202.087 10.9087 202.102 11.231C202.122 11.5483 202.144 11.8047 202.168 12H201.04ZM201.538 5.35693C201.333 5.35693 201.167 5.28369 201.04 5.13721C200.913 4.99072 200.85 4.81738 200.85 4.61719C200.85 4.41211 200.913 4.23633 201.04 4.08984C201.167 3.94336 201.333 3.87012 201.538 3.87012C201.743 3.87012 201.912 3.94336 202.043 4.08984C202.18 4.23633 202.249 4.41211 202.249 4.61719C202.249 4.81738 202.18 4.99072 202.043 5.13721C201.912 5.28369 201.743 5.35693 201.538 5.35693ZM203.589 8.26465V7.65674C203.848 7.48584 204.131 7.28076 204.438 7.0415C204.746 6.80225 205.037 6.5459 205.31 6.27246C205.583 5.99902 205.806 5.72803 205.977 5.45947C206.152 5.18604 206.24 4.92969 206.24 4.69043C206.24 4.3584 206.125 4.12158 205.896 3.97998C205.671 3.83838 205.42 3.76758 205.142 3.76758C204.907 3.76758 204.663 3.82861 204.409 3.95068C204.16 4.07275 203.95 4.229 203.779 4.41943L203.604 3.81885C203.76 3.61865 203.997 3.45264 204.314 3.3208C204.636 3.18896 204.958 3.12305 205.281 3.12305C205.588 3.12305 205.874 3.18408 206.138 3.30615C206.401 3.42822 206.611 3.60156 206.768 3.82617C206.929 4.05078 207.009 4.31689 207.009 4.62451C207.009 4.9126 206.926 5.20312 206.76 5.49609C206.594 5.78418 206.384 6.06494 206.13 6.33838C205.876 6.60693 205.615 6.85596 205.347 7.08545C205.078 7.31494 204.836 7.5127 204.622 7.67871H205.603C205.984 7.67871 206.321 7.67627 206.614 7.67139C206.907 7.66162 207.129 7.64453 207.28 7.62012V8.26465H203.589ZM208.379 7.44434V6.6167H213.652V7.44434H208.379ZM208.379 9.36328V8.54297H213.652V9.36328H208.379ZM214.751 8.95312V8.13281H218.596V8.95312H214.751ZM222.075 12V5.23975L220.493 6.25781L220.347 5.26904L222.075 4.12646H223.137V9.37061C223.137 9.60986 223.142 9.89795 223.152 10.2349C223.162 10.5669 223.174 10.894 223.188 11.2163C223.208 11.5386 223.228 11.7998 223.247 12H222.075Z"
							fill="#EF0070"
						/>
						<path
							id="three"
							style={{ "--order": "3" }}
							d="M176.125 59.15C175.145 59.15 174.35 58.805 173.74 58.115C173.13 57.415 172.825 56.38 172.825 55.01C172.825 53.65 173.125 52.61 173.725 51.89C174.325 51.17 175.165 50.81 176.245 50.81C176.835 50.81 177.325 50.915 177.715 51.125C178.115 51.325 178.445 51.63 178.705 52.04H178.795C178.845 51.87 178.91 51.685 178.99 51.485C179.07 51.285 179.165 51.11 179.275 50.96H180.31C180.24 51.18 180.175 51.47 180.115 51.83C180.055 52.19 180.01 52.57 179.98 52.97C179.95 53.37 179.935 53.75 179.935 54.11V57.23C179.935 57.54 179.995 57.76 180.115 57.89C180.235 58.01 180.38 58.07 180.55 58.07C180.63 58.07 180.715 58.06 180.805 58.04C180.895 58.02 180.96 58.005 181 57.995V58.955C180.93 58.995 180.815 59.035 180.655 59.075C180.495 59.125 180.33 59.15 180.16 59.15C179.79 59.15 179.485 59.06 179.245 58.88C179.015 58.7 178.845 58.38 178.735 57.92H178.63C178.4 58.26 178.095 58.55 177.715 58.79C177.335 59.03 176.805 59.15 176.125 59.15ZM176.35 58.055C177.18 58.055 177.765 57.82 178.105 57.35C178.455 56.87 178.63 56.115 178.63 55.085V54.995C178.63 53.995 178.465 53.235 178.135 52.715C177.815 52.185 177.215 51.92 176.335 51.92C175.605 51.92 175.065 52.185 174.715 52.715C174.365 53.245 174.19 54.015 174.19 55.025C174.19 56.025 174.36 56.78 174.7 57.29C175.05 57.8 175.6 58.055 176.35 58.055ZM190.419 49.31C189.219 49.31 188.339 49.64 187.779 50.3C187.219 50.95 186.939 51.845 186.939 52.985C186.939 53.985 187.124 54.89 187.494 55.7C187.864 56.51 188.514 57.25 189.444 57.92V59H185.124V57.815H187.794C187.154 57.325 186.614 56.67 186.174 55.85C185.734 55.03 185.514 54.06 185.514 52.94C185.514 51.96 185.704 51.11 186.084 50.39C186.464 49.67 187.019 49.115 187.749 48.725C188.489 48.325 189.379 48.125 190.419 48.125C191.479 48.125 192.374 48.32 193.104 48.71C193.834 49.1 194.389 49.655 194.769 50.375C195.149 51.095 195.339 51.945 195.339 52.925C195.339 54.045 195.119 55.02 194.679 55.85C194.249 56.67 193.714 57.325 193.074 57.815H195.729V59H191.409V57.92C192.339 57.26 192.989 56.52 193.359 55.7C193.739 54.88 193.929 53.975 193.929 52.985C193.929 51.845 193.644 50.95 193.074 50.3C192.514 49.64 191.629 49.31 190.419 49.31Z"
							fill="#00FD00"
						/>
						<path
							id="four"
							style={{ "--order": "4" }}
							d="M139.417 20L136.479 15.8838C136.357 15.7129 136.245 15.5615 136.143 15.4297C136.045 15.2979 135.935 15.1538 135.813 14.9976C135.691 14.8413 135.53 14.6411 135.33 14.397H136.589L139.556 18.5205C139.688 18.7012 139.8 18.855 139.893 18.9819C139.99 19.104 140.098 19.2407 140.215 19.3921C140.332 19.5386 140.488 19.7412 140.684 20H139.417ZM135.271 20C135.476 19.7363 135.637 19.5264 135.754 19.3701C135.872 19.2139 135.974 19.0747 136.062 18.9526C136.155 18.8257 136.257 18.6816 136.37 18.5205L137.681 16.6162L138.054 17.7808L136.509 20H135.271ZM138.208 17.7808L137.856 16.6235L139.365 14.397H140.603C140.413 14.6411 140.256 14.8438 140.134 15.0049C140.017 15.1611 139.912 15.3052 139.819 15.437C139.727 15.564 139.622 15.7129 139.504 15.8838L138.208 17.7808ZM141.621 15.4443V14.6167H146.895V15.4443H141.621ZM141.621 17.3633V16.543H146.895V17.3633H141.621ZM149.502 17.583C149.502 16.7871 149.561 16.1719 149.678 15.7373C149.795 15.3027 149.973 14.9292 150.212 14.6167C150.457 14.3091 150.645 14.0527 150.776 13.8477C150.913 13.6426 150.981 13.4424 150.981 13.2471C150.981 13.0859 150.906 12.9224 150.754 12.7563C150.608 12.5903 150.332 12.5073 149.927 12.5073C149.707 12.5073 149.478 12.5586 149.238 12.6611C148.999 12.7588 148.774 12.915 148.564 13.1299L148.323 12.1484C148.503 11.9775 148.755 11.8335 149.077 11.7163C149.404 11.5991 149.739 11.5405 150.081 11.5405C150.73 11.5405 151.23 11.6919 151.582 11.9946C151.934 12.2925 152.109 12.6904 152.109 13.1885C152.109 13.5303 152.019 13.833 151.838 14.0967C151.658 14.3604 151.445 14.6313 151.201 14.9097C151.011 15.1294 150.867 15.3467 150.769 15.5615C150.671 15.7764 150.605 16.04 150.571 16.3525C150.537 16.6602 150.52 17.0703 150.52 17.583H149.502ZM150.022 20.1318C149.822 20.1318 149.648 20.061 149.502 19.9194C149.355 19.7729 149.282 19.5996 149.282 19.3994C149.282 19.1943 149.355 19.021 149.502 18.8794C149.648 18.7329 149.822 18.6597 150.022 18.6597C150.227 18.6597 150.4 18.7329 150.542 18.8794C150.688 19.021 150.762 19.1943 150.762 19.3994C150.762 19.5996 150.688 19.7729 150.542 19.9194C150.4 20.061 150.227 20.1318 150.022 20.1318Z"
							fill="#ffff00"
						/>
						<path
							id="five"
							style={{ "--order": "5" }}
							d="M96.186 59.1318C95.6978 59.1318 95.251 59.0195 94.8457 58.7949C94.4404 58.5654 94.1182 58.2407 93.8789 57.8208C93.6396 57.4009 93.52 56.8979 93.52 56.312C93.52 55.7554 93.6348 55.25 93.8643 54.7959C94.0986 54.3369 94.4307 53.9707 94.8604 53.6973C95.29 53.4238 95.7954 53.2871 96.3765 53.2871C96.7427 53.2871 97.0576 53.3311 97.3213 53.4189C97.5898 53.5068 97.8242 53.6191 98.0244 53.7559L97.834 54.7446C97.585 54.564 97.3359 54.4272 97.0869 54.3345C96.8428 54.2417 96.5791 54.1953 96.2959 54.1953C95.8076 54.1953 95.395 54.376 95.0581 54.7373C94.7261 55.0986 94.5601 55.604 94.5601 56.2534C94.5601 56.8442 94.7163 57.3228 95.0288 57.689C95.3413 58.0503 95.7637 58.231 96.2959 58.231C96.6279 58.231 96.9282 58.1748 97.1968 58.0625C97.4702 57.9453 97.7266 57.7817 97.9658 57.5718L98.0757 58.5386C97.8022 58.7485 97.5215 58.8999 97.2334 58.9927C96.9453 59.0854 96.5962 59.1318 96.186 59.1318ZM99.0938 55.2646V54.6567C99.3525 54.4858 99.6357 54.2808 99.9434 54.0415C100.251 53.8022 100.542 53.5459 100.815 53.2725C101.088 52.999 101.311 52.728 101.481 52.4595C101.657 52.186 101.745 51.9297 101.745 51.6904C101.745 51.3584 101.63 51.1216 101.401 50.98C101.176 50.8384 100.925 50.7676 100.646 50.7676C100.412 50.7676 100.168 50.8286 99.9141 50.9507C99.665 51.0728 99.4551 51.229 99.2842 51.4194L99.1084 50.8188C99.2646 50.6187 99.5015 50.4526 99.8188 50.3208C100.141 50.189 100.463 50.123 100.786 50.123C101.093 50.123 101.379 50.1841 101.643 50.3062C101.906 50.4282 102.116 50.6016 102.272 50.8262C102.434 51.0508 102.514 51.3169 102.514 51.6245C102.514 51.9126 102.431 52.2031 102.265 52.4961C102.099 52.7842 101.889 53.0649 101.635 53.3384C101.381 53.6069 101.12 53.856 100.852 54.0854C100.583 54.3149 100.341 54.5127 100.126 54.6787H101.108C101.489 54.6787 101.826 54.6763 102.119 54.6714C102.412 54.6616 102.634 54.6445 102.785 54.6201V55.2646H99.0938ZM103.884 54.4443V53.6167H109.157V54.4443H103.884ZM103.884 56.3633V55.543H109.157V56.3633H103.884ZM112.124 59.1318C111.606 59.1318 111.179 58.978 110.842 58.6704C110.505 58.3628 110.336 58.0063 110.336 57.6011C110.336 57.3228 110.4 57.0444 110.527 56.7661C110.659 56.4878 110.883 56.2461 111.201 56.041C111.523 55.8359 111.967 55.7065 112.534 55.6528C112.661 55.6382 112.827 55.6211 113.032 55.6016C113.237 55.582 113.432 55.5649 113.618 55.5503C113.808 55.5308 113.94 55.5186 114.013 55.5137V55.1035C114.013 54.7715 113.896 54.5322 113.662 54.3857C113.432 54.2393 113.11 54.166 112.695 54.166C112.407 54.166 112.116 54.2246 111.823 54.3418C111.535 54.459 111.232 54.6299 110.915 54.8545C110.915 54.7324 110.92 54.5542 110.93 54.3198C110.939 54.0806 110.952 53.9023 110.966 53.7852C111.25 53.6631 111.545 53.5508 111.853 53.4482C112.165 53.3408 112.529 53.2871 112.944 53.2871C113.579 53.2871 114.084 53.436 114.46 53.7339C114.841 54.0269 115.031 54.3906 115.031 54.8252V56.9712C115.031 57.3667 115.068 57.728 115.141 58.0552C115.219 58.3774 115.319 58.6924 115.441 59H114.453C114.418 58.9121 114.375 58.7925 114.321 58.6411C114.267 58.4897 114.221 58.3262 114.182 58.1504C113.854 58.4971 113.515 58.7485 113.164 58.9048C112.812 59.0562 112.465 59.1318 112.124 59.1318ZM112.285 58.231C112.568 58.231 112.844 58.1724 113.112 58.0552C113.386 57.938 113.686 57.6597 114.013 57.2202V56.2827C113.925 56.2876 113.789 56.2998 113.603 56.3193C113.422 56.334 113.237 56.3511 113.046 56.3706C112.856 56.3901 112.702 56.4072 112.585 56.4219C112.121 56.4756 111.794 56.6001 111.604 56.7954C111.418 56.9858 111.325 57.208 111.325 57.4619C111.325 57.7061 111.411 57.8965 111.582 58.0332C111.752 58.165 111.987 58.231 112.285 58.231ZM116.452 55.2646V54.6567C116.711 54.4858 116.994 54.2808 117.302 54.0415C117.609 53.8022 117.9 53.5459 118.173 53.2725C118.447 52.999 118.669 52.728 118.84 52.4595C119.016 52.186 119.104 51.9297 119.104 51.6904C119.104 51.3584 118.989 51.1216 118.759 50.98C118.535 50.8384 118.283 50.7676 118.005 50.7676C117.771 50.7676 117.526 50.8286 117.272 50.9507C117.023 51.0728 116.813 51.229 116.643 51.4194L116.467 50.8188C116.623 50.6187 116.86 50.4526 117.177 50.3208C117.5 50.189 117.822 50.123 118.144 50.123C118.452 50.123 118.737 50.1841 119.001 50.3062C119.265 50.4282 119.475 50.6016 119.631 50.8262C119.792 51.0508 119.873 51.3169 119.873 51.6245C119.873 51.9126 119.79 52.2031 119.624 52.4961C119.458 52.7842 119.248 53.0649 118.994 53.3384C118.74 53.6069 118.479 53.856 118.21 54.0854C117.941 54.3149 117.7 54.5127 117.485 54.6787H118.466C118.847 54.6787 119.184 54.6763 119.477 54.6714C119.77 54.6616 119.992 54.6445 120.144 54.6201V55.2646H116.452ZM123.461 57.4399V52.5181H124.289V57.4399H123.461ZM121.433 55.3745V54.5542H126.318V55.3745H121.433ZM130.332 59.1318C129.887 59.1318 129.47 59.0781 129.079 58.9707C128.688 58.8633 128.317 58.7559 127.966 58.6484C127.966 58.4678 127.966 58.187 127.966 57.8062C127.966 57.4204 127.966 56.9883 127.966 56.5098C127.966 56.0264 127.966 55.5405 127.966 55.0522C127.966 54.564 127.966 54.1196 127.966 53.7192C127.966 53.314 127.966 53.0063 127.966 52.7964C127.966 52.5327 127.963 52.2397 127.958 51.9175C127.958 51.5952 127.954 51.2827 127.944 50.98C127.934 50.6724 127.915 50.416 127.885 50.2109H128.984C128.984 50.2109 128.984 50.3403 128.984 50.5991C128.984 50.853 128.984 51.1753 128.984 51.5659C128.984 51.9517 128.984 52.3496 128.984 52.7598C128.984 53.1699 128.984 53.5337 128.984 53.8511C128.984 54.1636 128.984 54.3711 128.984 54.4736C129.243 54.1367 129.545 53.856 129.892 53.6313C130.239 53.4019 130.642 53.2871 131.101 53.2871C131.472 53.2871 131.799 53.4043 132.082 53.6387C132.365 53.873 132.587 54.1978 132.749 54.6128C132.915 55.0229 132.998 55.4966 132.998 56.0337C132.998 56.9761 132.756 57.728 132.272 58.2896C131.789 58.8511 131.142 59.1318 130.332 59.1318ZM130.332 58.2896C130.82 58.2896 131.22 58.1016 131.533 57.7256C131.85 57.3447 132.009 56.8467 132.009 56.2314C132.009 55.6211 131.901 55.1401 131.687 54.7886C131.472 54.4321 131.167 54.2539 130.771 54.2539C130.429 54.2539 130.092 54.3955 129.76 54.6787C129.428 54.9619 129.169 55.333 128.984 55.792V57.9893C129.257 58.0967 129.489 58.1748 129.68 58.2236C129.875 58.2676 130.092 58.2896 130.332 58.2896ZM134.001 55.2646V54.6567C134.26 54.4858 134.543 54.2808 134.851 54.0415C135.158 53.8022 135.449 53.5459 135.722 53.2725C135.996 52.999 136.218 52.728 136.389 52.4595C136.564 52.186 136.652 51.9297 136.652 51.6904C136.652 51.3584 136.538 51.1216 136.308 50.98C136.083 50.8384 135.832 50.7676 135.554 50.7676C135.319 50.7676 135.075 50.8286 134.821 50.9507C134.572 51.0728 134.362 51.229 134.191 51.4194L134.016 50.8188C134.172 50.6187 134.409 50.4526 134.726 50.3208C135.048 50.189 135.371 50.123 135.693 50.123C136 50.123 136.286 50.1841 136.55 50.3062C136.813 50.4282 137.023 50.6016 137.18 50.8262C137.341 51.0508 137.421 51.3169 137.421 51.6245C137.421 51.9126 137.338 52.2031 137.172 52.4961C137.006 52.7842 136.796 53.0649 136.542 53.3384C136.289 53.6069 136.027 53.856 135.759 54.0854C135.49 54.3149 135.249 54.5127 135.034 54.6787H136.015C136.396 54.6787 136.733 54.6763 137.026 54.6714C137.319 54.6616 137.541 54.6445 137.692 54.6201V55.2646H134.001Z"
							fill="#9934F4"
						/>
					</g>
				</svg>
			</Logo>
			<Button className="icon-mobile" onClick={toggleRight}>
				<Icon width="32" height="32" ref={hamburgerIconRight}>
					<line id="top" x1="10%" y1="20%" x2="50%" y2="20%" />
					<line id="middle" x1="10%" y1="50%" x2="90%" y2="50%" />
					<line id="bottom" x1="50%" y1="80%" x2="90%" y2="80%" />
				</Icon>
			</Button>
			<Button className="icon-desktop" onClick={toggle}>
				<Icon width="32" height="32" ref={hamburgerIcon}>
					<line id="top" x1="10%" y1="20%" x2="50%" y2="20%" />
					<line id="middle" x1="10%" y1="50%" x2="90%" y2="50%" />
					<line id="bottom" x1="50%" y1="80%" x2="90%" y2="80%" />
				</Icon>
			</Button>
			<AsideRight ref={asideRight}>
				<h2>Ramas</h2>
				<ul>
					<li>
						<Link to="/" onClick={() => changeBranch("intro")}>
							Inicio
						</Link>
					</li>
					<li>
						<Link to="/algebra" onClick={() => changeBranch("algebra")}>
							Álgebra
						</Link>
					</li>
					<li>
						<Link to="/analisis" onClick={() => changeBranch("analysis")}>
							Análisis
						</Link>
					</li>
					<li>
						<Link to="/aritmetica" onClick={() => changeBranch("aritmetics")}>
							Aritmética
						</Link>
					</li>
					<li>
						<Link to="/geometria" onClick={() => changeBranch("geometry")}>
							Geometría
						</Link>
					</li>
					<li>
						<Link to="/probabilidad-y-estadistica" onClick={() => changeBranch("statistics")}>
							Probabilidad y estadística
						</Link>
					</li>
					<li>
						<Link to="/extras" onClick={() => changeBranch("extras")}>
							Extras
						</Link>
					</li>
				</ul>
			</AsideRight>
			<AsideLeft ref={asideLeft}>
				{branch === "intro" && <h2>Inicio</h2>}
				{branch === "algebra" && <h2>Álgebra</h2>}
				{branch === "analysis" && <h2>Análisis</h2>}
				{branch === "aritmetics" && <h2>Aritmética</h2>}
				{branch === "geometry" && <h2>Geometría</h2>}
				{branch === "statistics" && <h2>Probabilidad y Estadística</h2>}
				{branch === "extras" && <h2>Extras</h2>}
				<ul>
					{branch === "intro" && (
						<Fragment>
							<li>
								<Link to="/" onClick={() => changeBranch(branch)}>
									¿Qué son las matemáticas?
								</Link>
							</li>
							<li>
								<Link to="/" onClick={() => changeBranch(branch)}>
									¿Para qué sirven?
								</Link>
							</li>
						</Fragment>
					)}
					{branch === "geometry" && (
						<Fragment>
							<li>
								<details>
									<summary>Figuras geométricas</summary>
									<ul>
										<li>
											<Link to="/geometria/triangulos" onClick={() => changeBranch(branch)}>
												Triángulos
											</Link>
										</li>
										<li>
											<Link to="/geometria/cuadrado" onClick={() => changeBranch(branch)}>
												Cuadrado
											</Link>
										</li>
										<li>
											<Link to="/geometria/rectangulo" onClick={() => changeBranch(branch)}>
												Rectángulo
											</Link>
										</li>
										<li>
											<Link to="/geometria/circulo" onClick={() => changeBranch(branch)}>
												Círculo
											</Link>
										</li>
										{/* <li>
											<Link to="/" onClick={() => changeBranch(branch)}>Elipse</Link>
										</li>
										<li>
											<Link to="/" onClick={() => changeBranch(branch)}>Polígonos</Link>
										</li> */}
									</ul>
								</details>
							</li>
							<li>
								<details>
									<summary>Cuerpos geométricos</summary>
									<ul>
										<li>
											<Link to="/geometria/piramides" onClick={() => changeBranch(branch)}>
												Pirámides
											</Link>
										</li>
										<li>
											<Link to="/geometria/paralelepipedos" onClick={() => changeBranch(branch)}>
												Paralelepípedos
											</Link>
										</li>
										<li>
											<Link to="/geometria/poliedros" onClick={() => changeBranch(branch)}>
												Poliedros
											</Link>
										</li>
										<li>
											<Link to="/geometria/prismas" onClick={() => changeBranch(branch)}>
												Prismas
											</Link>
										</li>
									</ul>
								</details>
							</li>
						</Fragment>
					)}
					{branch === "extras" && (
						<Fragment>
							<li>
								<Link to="/extras/descuentos" onClick={() => changeBranch(branch)}>
									Descuentos
								</Link>
							</li>
						</Fragment>
					)}
				</ul>
			</AsideLeft>
		</HeaderContainer>
	);
};

export default Header;

const HeaderContainer = styled.header`
	align-items: center;
	background-color: var(--fond);
	box-shadow: 0px 0px 10px 5px rgba(0, 0, 0, 0.5);
	display: flex;
	height: 72px;
	justify-content: space-between;
	left: 0;
	position: fixed;
	top: 0;
	width: 100%;
	z-index: 1;
`;

const Logo = styled.div`
	align-items: center;
	display: flex;
	height: inherit;
	justify-content: center;
	max-width: 200px;
	margin: 20px;
	transition: all 0.2s ease;
	width: 100%;

	&:hover,
	&:focus,
	&:active {
		filter: brightness(1.1);
		transform: scale(1.05);
	}

	@media screen and (min-width: 768px) {
		max-height: 72px;
		margin: 20px;
		padding-left: 10px;
	}
`;

const Button = styled.button`
	background-color: transparent;
	border: none;
	cursor: pointer;
	margin: 20px;
	outline: none;
	outline-offset: 5px;
	z-index: 10;

	&:focus, &:active {
		outline: 1px dashed var(--special-text);
	`;

const Icon = styled.svg`
	min-width: 32px;

	& line {
		stroke: var(--special-text);
		stroke-width: 10%;
		stroke-linecap: round;
	}

	& #top {
		animation: top-off 0.5s;
		-webkit-animation-fill-mode: forwards;
		-moz-animation-fill-mode: forwards;
		-o-animation-fill-mode: forwards;
		-ms-animation-fill-mode: forwards;
		animation-fill-mode: forwards;
	}

	& #middle {
		animation: middle-off 0.5s;
		-webkit-animation-fill-mode: forwards;
		-moz-animation-fill-mode: forwards;
		-o-animation-fill-mode: forwards;
		-ms-animation-fill-mode: forwards;
		animation-fill-mode: forwards;
	}

	& #bottom {
		animation: bottom-off 0.5s;
		-webkit-animation-fill-mode: forwards;
		-moz-animation-fill-mode: forwards;
		-o-animation-fill-mode: forwards;
		-ms-animation-fill-mode: forwards;
		animation-fill-mode: forwards;
	}

	&.active {
		position: relative;
		z-index: 10;
	}

	&.active #top {
		animation: top-on 0.5s;
		-webkit-animation-fill-mode: forwards;
		-moz-animation-fill-mode: forwards;
		-o-animation-fill-mode: forwards;
		-ms-animation-fill-mode: forwards;
		animation-fill-mode: forwards;
	}

	&.active #middle {
		animation: middle-on 0.5s;
		-webkit-animation-fill-mode: forwards;
		-moz-animation-fill-mode: forwards;
		-o-animation-fill-mode: forwards;
		-ms-animation-fill-mode: forwards;
		animation-fill-mode: forwards;
	}

	&.active #bottom {
		animation: bottom-on 0.5s;
		-webkit-animation-fill-mode: forwards;
		-moz-animation-fill-mode: forwards;
		-o-animation-fill-mode: forwards;
		-ms-animation-fill-mode: forwards;
		animation-fill-mode: forwards;
	}

	@keyframes top-on {
		from {
			transform: rotate(0deg);
		}

		to {
			transform: translate(25%, 0%) rotate(45deg);
		}
	}

	@keyframes middle-on {
		from {
			transform: rotate(0deg);
		}

		to {
			transform: translate(-25%, 50%) rotate(-45deg);
		}
	}

	@keyframes bottom-on {
		from {
			transform: rotate(0deg);
		}

		to {
			transform: rotate(45deg) translate(16%, -76%);
		}
	}

	@keyframes top-off {
		from {
			transform: translate(25%, 0%) rotate(45deg);
		}

		to {
			transform: rotate(0deg);
		}
	}

	@keyframes middle-off {
		from {
			transform: translate(-25%, 50%) rotate(-45deg);
		}

		to {
			transform: rotate(0deg);
		}
	}

	@keyframes bottom-off {
		from {
			transform: rotate(45deg) translate(16%, -76%);
		}

		to {
			transform: rotate(0deg);
		}
	}
`;

const IconRight = styled(Icon)`
	transform: rotateY(180deg);
`;

const Aside = styled.aside`
	background-image: linear-gradient(180deg, var(--dark-fond) 0%, var(--fond) 100%);
	box-shadow: 0 0 10px 5px rgba(0, 0, 0, 0.2);
	color: var(--special-text);
	height: 100vh;
	position: fixed;
	top: 0;
	transition: left 0.3s, right 0.3s;
	width: 100%;

	h2 {
		font: bold 1.8rem/3.2rem var(--font);
		height: 72px;
		padding: 20px;
	}

	ul {
		height: calc(100% - 72px);
		list-style: none;
		padding: 20px;
		overflow-y: auto;

		li {
			margin: 10px 0;

			details {
				&:focus-within summary,
				&:hover summary {
					color: var(--special-text);
				}

				summary {
					background-color: transparent;
					border: none;
					color: var(--light-text);
					cursor: pointer;
					font: bold 1.8rem/2rem var(--font);
					padding: 5px;
					position: relative;
					text-decoration: none;
					transition: all 0.3s;
					width: fit-content;

					&:hover,
					&.active,
					&:focus {
						color: var(--special-text);
					}

					&::before {
						content: "";
						position: absolute;
						bottom: 0;
						left: 0;
						right: 0;
						height: 2px;
						background-color: var(--special-text);
						transform-origin: right bottom;
						transform: scaleX(0);
						transition: transform 0.5s ease 0s;
					}

					&:hover::before,
					&:focus::before,
					&:active::before {
						transform-origin: left bottom;
						transform: scaleX(1);
					}
				}

				ul {
					padding: 0 20px;
				}
			}

			a {
				color: var(--light-text);
				font: bold 1.8rem/2rem var(--font);
				padding: 5px;
				position: relative;
				text-decoration: none;
				transition: all 0.3s;

				&:hover,
				&.active,
				&:focus {
					color: var(--special-text);
				}

				&::before {
					content: "";
					position: absolute;
					bottom: 0;
					left: 0;
					right: 0;
					height: 2px;
					background-color: var(--special-text);
					transform-origin: right bottom;
					transform: scaleX(0);
					transition: transform 0.5s ease 0s;
				}

				&:hover::before,
				&:focus::before,
				&:active::before {
					transform-origin: left bottom;
					transform: scaleX(1);
				}
			}
		}
	}
`;

const AsideLeft = styled(Aside)`
	left: -100%;

	h2 {
		padding-left: 72px;
	}

	&.aside_left_active {
		left: 0;
	}

	@media screen and (min-width: 768px) {
		max-width: 350px;

		h2 {
			padding-left: 20px;
		}
	}
`;

const AsideRight = styled(Aside)`
	right: -100%;
	z-index: 1;

	h2 {
		padding-right: 72px;
	}

	&.aside_right_active {
		right: 0;
	}

	@media screen and (min-width: 768px) {
		max-width: 300px;
	}
`;
